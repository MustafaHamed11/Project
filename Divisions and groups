/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package zag_sched.lookups.gui;

import java.util.ArrayList;
import java.util.Date;
import java.util.LinkedHashMap;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import static zag_sched.lookups.gui.JFrameMaster.checkConfirm;
import zag_sched.lookups.logs.LogHandler;
import zag_sched.lookups.lecturers.Lecturer;
import zag_sched.lookups.lecturers.LecturerHandler;
import zag_sched.lookups.departments.Department;
import zag_sched.lookups.departments.DepartmentHandler;
import zag_sched.lookups.divisions.Division;
import zag_sched.lookups.divisions.DivisionHandler;
import zag_sched.lookups.groups.Group;
import zag_sched.lookups.groups.GroupHandler;
import zag_sched.lookups.lecturers.LecturersPositionHandler;

import zag_sched.users.User;
import zag_sched.users.UserHandler;

/**
 *
 * @author Administrator
 */
public class JInternalFrameLookupsGroupsDivisions extends javax.swing.JInternalFrame {

    private JFrame masterForm;

    /**
     * Creates new form JInternalFrameLookups
     */
    public JInternalFrameLookupsGroupsDivisions() {
        initComponents();
    }

    public JInternalFrameLookupsGroupsDivisions(JFrame masterForm) {
        initComponents();
        this.masterForm = masterForm;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabelConsolateTypeId = new javax.swing.JLabel();
        jTextFieldDivisionId = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        jTextFieldDivisionName = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTableDivision = new javax.swing.JTable();
        jButtonAddDivision = new javax.swing.JButton();
        jButtonUpdateDivision = new javax.swing.JButton();
        jButtonDeleteDivision = new javax.swing.JButton();
        jButtonCancelDivision = new javax.swing.JButton();
        jComboBoxDepartment = new javax.swing.JComboBox();
        jLabel3 = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        jLabelKanaatId = new javax.swing.JLabel();
        jTextFieldGroupId = new javax.swing.JTextField();
        jLabelKanaatText = new javax.swing.JLabel();
        jTextFieldGroupName = new javax.swing.JTextField();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTableGroups = new javax.swing.JTable();
        jButtonAddGroup = new javax.swing.JButton();
        jButtonUpdateGroup = new javax.swing.JButton();
        jButtonDeleteGroup = new javax.swing.JButton();
        jButtonCancelGroup = new javax.swing.JButton();
        jComboBoxDivision = new javax.swing.JComboBox();
        jLabel1 = new javax.swing.JLabel();

        setClosable(true);
        setIconifiable(true);
        setTitle("الفرق / المجموعات");
        addInternalFrameListener(new javax.swing.event.InternalFrameListener() {
            public void internalFrameActivated(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameClosed(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameClosing(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameDeactivated(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameDeiconified(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameIconified(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameOpened(javax.swing.event.InternalFrameEvent evt) {
                formInternalFrameOpened(evt);
            }
        });

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)), "الفرق"));
        jPanel1.setForeground(new java.awt.Color(51, 255, 51));

        jLabelConsolateTypeId.setText("كود الفرقة");
        jLabelConsolateTypeId.setToolTipText("");

        jTextFieldDivisionId.setEditable(false);

        jLabel2.setText("اسم الفرقة");

        jTableDivision.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "كود الفرقة", "اسم الفرقة", "الإدارة"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jTableDivision.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTableDivisionMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(jTableDivision);

        jButtonAddDivision.setIcon(new javax.swing.ImageIcon(getClass().getResource("/zag_sched/lookups/gui/imgs/Add.gif"))); // NOI18N
        jButtonAddDivision.setText("إضافة");
        jButtonAddDivision.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonAddDivisionActionPerformed(evt);
            }
        });

        jButtonUpdateDivision.setIcon(new javax.swing.ImageIcon(getClass().getResource("/zag_sched/lookups/gui/imgs/save.png"))); // NOI18N
        jButtonUpdateDivision.setText("تعديل");
        jButtonUpdateDivision.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonUpdateDivisionActionPerformed(evt);
            }
        });

        jButtonDeleteDivision.setIcon(new javax.swing.ImageIcon(getClass().getResource("/zag_sched/lookups/gui/imgs/save.png"))); // NOI18N
        jButtonDeleteDivision.setText("مسح");
        jButtonDeleteDivision.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonDeleteDivisionActionPerformed(evt);
            }
        });

        jButtonCancelDivision.setIcon(new javax.swing.ImageIcon(getClass().getResource("/zag_sched/lookups/gui/imgs/refresh.png"))); // NOI18N
        jButtonCancelDivision.setText("إعادة بدء");
        jButtonCancelDivision.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCancelDivisionActionPerformed(evt);
            }
        });

        jLabel3.setText("الإدارة");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(25, 25, 25)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 362, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(24, 24, 24)
                        .addComponent(jButtonAddDivision)
                        .addGap(18, 18, 18)
                        .addComponent(jButtonUpdateDivision)
                        .addGap(27, 27, 27)
                        .addComponent(jButtonDeleteDivision)
                        .addGap(18, 18, 18)
                        .addComponent(jButtonCancelDivision))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jLabel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabelConsolateTypeId, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel3, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jComboBoxDepartment, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jTextFieldDivisionName, javax.swing.GroupLayout.DEFAULT_SIZE, 202, Short.MAX_VALUE)
                            .addComponent(jTextFieldDivisionId))))
                .addContainerGap(50, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(39, 39, 39)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jTextFieldDivisionId, javax.swing.GroupLayout.DEFAULT_SIZE, 26, Short.MAX_VALUE)
                    .addComponent(jLabelConsolateTypeId, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextFieldDivisionName, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jComboBoxDepartment, javax.swing.GroupLayout.PREFERRED_SIZE, 29, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 26, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButtonAddDivision)
                    .addComponent(jButtonUpdateDivision)
                    .addComponent(jButtonDeleteDivision)
                    .addComponent(jButtonCancelDivision))
                .addGap(18, 18, 18)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 188, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(30, 30, 30))
        );

        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)), "المجموعات"));

        jLabelKanaatId.setText("كود المجموعة");

        jTextFieldGroupId.setEditable(false);

        jLabelKanaatText.setText("اسم المجموعة");

        jTableGroups.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "كود المجموعة", "اسم المجموعة", "الفرقة"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jTableGroups.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTableGroupsMouseClicked(evt);
            }
        });
        jScrollPane2.setViewportView(jTableGroups);

        jButtonAddGroup.setIcon(new javax.swing.ImageIcon(getClass().getResource("/zag_sched/lookups/gui/imgs/Add.gif"))); // NOI18N
        jButtonAddGroup.setText("إضافة");
        jButtonAddGroup.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonAddGroupActionPerformed(evt);
            }
        });

        jButtonUpdateGroup.setIcon(new javax.swing.ImageIcon(getClass().getResource("/zag_sched/lookups/gui/imgs/save.png"))); // NOI18N
        jButtonUpdateGroup.setText("تعديل");
        jButtonUpdateGroup.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonUpdateGroupActionPerformed(evt);
            }
        });

        jButtonDeleteGroup.setIcon(new javax.swing.ImageIcon(getClass().getResource("/zag_sched/lookups/gui/imgs/delete_ena.png"))); // NOI18N
        jButtonDeleteGroup.setText("مسح");
        jButtonDeleteGroup.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonDeleteGroupActionPerformed(evt);
            }
        });

        jButtonCancelGroup.setIcon(new javax.swing.ImageIcon(getClass().getResource("/zag_sched/lookups/gui/imgs/refresh.png"))); // NOI18N
        jButtonCancelGroup.setText("إعادة بدء");
        jButtonCancelGroup.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCancelGroupActionPerformed(evt);
            }
        });

        jComboBoxDivision.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

        jLabel1.setText("الفرقة");

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGap(25, 25, 25)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 381, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addComponent(jButtonAddGroup, javax.swing.GroupLayout.PREFERRED_SIZE, 91, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jButtonUpdateGroup)
                        .addGap(19, 19, 19)
                        .addComponent(jButtonDeleteGroup)
                        .addGap(18, 18, 18)
                        .addComponent(jButtonCancelGroup))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addComponent(jLabelKanaatText, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(jLabelKanaatId, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                            .addComponent(jLabel1))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jTextFieldGroupName, javax.swing.GroupLayout.DEFAULT_SIZE, 202, Short.MAX_VALUE)
                            .addComponent(jTextFieldGroupId)
                            .addComponent(jComboBoxDivision, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGap(39, 39, 39)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jTextFieldGroupId, javax.swing.GroupLayout.DEFAULT_SIZE, 26, Short.MAX_VALUE)
                    .addComponent(jLabelKanaatId, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextFieldGroupName, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelKanaatText, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jComboBoxDivision, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 24, Short.MAX_VALUE)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButtonAddGroup)
                    .addComponent(jButtonUpdateGroup)
                    .addComponent(jButtonDeleteGroup)
                    .addComponent(jButtonCancelGroup))
                .addGap(18, 18, 18)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 188, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(31, 31, 31))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(53, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(21, 21, 21)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(40, Short.MAX_VALUE))
        );

        jPanel1.getAccessibleContext().setAccessibleDescription("");

        pack();
    }// </editor-fold>                        

    private void formInternalFrameOpened(javax.swing.event.InternalFrameEvent evt) {                                         
        getAllDivisions();
         getAllGroups();
        
         ////2- Fill Department JCombo
        
         jComboBoxDepartment.insertItemAt("", 0);
        jComboBoxDepartment.setSelectedIndex(0);
        jComboBoxDepartment.removeAllItems();

        LinkedHashMap<String, Integer> DepartmentsHM = DepartmentHandler.getAllDepartmentsMap();
        for (String departmentName : DepartmentsHM.keySet()) {
            jComboBoxDepartment.addItem(departmentName);
            System.out.println("Add : " + departmentName);
        }

        
        
         ////2- Fill Division JCombo
        
         jComboBoxDivision.insertItemAt("", 0);
        jComboBoxDivision.setSelectedIndex(0);
        jComboBoxDivision.removeAllItems();

        LinkedHashMap<String, Integer> DivisionHM = DivisionHandler.getAllDivisionsMap();
        for (String divisionName : DivisionHM.keySet()) {
            jComboBoxDivision.addItem(divisionName);
            System.out.println("Add : " + divisionName);
        }

    }                                        

    private void jButtonAddGroupActionPerformed(java.awt.event.ActionEvent evt) {                                                
        
         int optionChoosen = JFrameMaster.checkConfirm();
         if (optionChoosen == JOptionPane.YES_OPTION) {        
         // 0. read Fields
        
         String groupName = jTextFieldGroupName.getText();
          String divisionName = (String) jComboBoxDivision.getSelectedItem();

         Group group = new Group(groupName,DivisionHandler.getDivisionByName(divisionName));
      
         // 1. Add row to DB
                GroupHandler.insertGroup(group);
         // 2. Add row to JTable
         DefaultTableModel tm = (DefaultTableModel) jTableGroups.getModel();
         Object[] rowData = {group.getGroupId(), group.getGroupName()};

         tm.addRow(rowData);

         /// refresh
         tm.setRowCount(0);
         getAllGroups();

         // 3. Empty fields
         emptyFieldsGroups();

         // 4. show Save Msg
         JOptionPane.showMessageDialog(null, "Data Saved Done", "Saving..", JOptionPane.INFORMATION_MESSAGE);
        
         // LogHandler.insertLog(10, 4, "Create Kanaat Ok - Kanaat : "+ kanaatText);
         }
        
    }                                               

    private void jButtonUpdateGroupActionPerformed(java.awt.event.ActionEvent evt) {                                                   
        
         int optionChoosen = JFrameMaster.checkConfirm();
         if (optionChoosen == JOptionPane.YES_OPTION) {  
         // 1, Read Fields
         int groupId = Integer.parseInt(jTextFieldGroupId.getText());
         String groupName = jTextFieldGroupName.getText();
        String divisionName = (String) jComboBoxDivision.getSelectedItem();
        
         Group group = new Group(groupId, groupName, DivisionHandler.getDivisionByName(divisionName));
            
         // 2. update DB
          GroupHandler.updateGroup(group);
         // 3. update JTable
         jTableGroups.setValueAt(groupId, jTableGroups.getSelectedRow(), 0);
         jTableGroups.setValueAt(groupName, jTableGroups.getSelectedRow(), 1);
      
         // 4. Empty Fields
         emptyFieldsGroups();
        
       //  LogHandler.insertLog(11, 4, "Update Kanaat Ok - Kanaat : "+groupName);
   
         }
        
    }                                                  

    private void jButtonDeleteGroupActionPerformed(java.awt.event.ActionEvent evt) {                                                   
        
         int optionChoosen = JFrameMaster.checkConfirm();
         if (optionChoosen == JOptionPane.YES_OPTION) {  
         //1. read user id
         int groupId = Integer.parseInt(jTextFieldGroupId.getText());
      //   String logDeletedKanaatText = KanaatHandler.getKanaatById(groupId).getKanaatText();
         //2. del from db
         GroupHandler.deleteGroup(groupId);

         // 3. remove From JTable
         DefaultTableModel tm = (DefaultTableModel) jTableGroups.getModel();
         tm.removeRow(jTableGroups.getSelectedRow());

         // 4. empty Fields
         emptyFieldsGroups();
      //   LogHandler.insertLog(12, 4, "Delete Kanaat Ok - Kanaat  : "+logDeletedKanaatText);
         }
         
    }                                                  

    private void jTableGroupsMouseClicked(java.awt.event.MouseEvent evt) {                                          
        
         Integer groupId = (Integer) jTableGroups.getValueAt(jTableGroups.getSelectedRow(), 0);
         String groupName = (String) jTableGroups.getValueAt(jTableGroups.getSelectedRow(), 1);
     String divisionName = (String) jTableGroups.getValueAt(jTableGroups.getSelectedRow(), 2);


         jTextFieldGroupId.setText(groupId.toString());
         jTextFieldGroupName.setText(groupName);
            jComboBoxDivision.setSelectedItem(DivisionHandler.getDivisionByName(divisionName).getDivisionName());
          
    }                                         

    private void jButtonCancelGroupActionPerformed(java.awt.event.ActionEvent evt) {                                                   
        emptyFieldsGroups();
    }                                                  

    private void jButtonCancelDivisionActionPerformed(java.awt.event.ActionEvent evt) {                                                      
        emptyFieldsDivisions();
    }                                                     

    private void jButtonDeleteDivisionActionPerformed(java.awt.event.ActionEvent evt) {                                                      
        int optionChoosen = JFrameMaster.checkConfirm();
        if (optionChoosen == JOptionPane.YES_OPTION) {
            //1. read user id
            int divisionId = Integer.parseInt(jTextFieldDivisionId.getText());
           // String logDeletedConsolateName = LecturerHandler.getLecturerById(divisionId).getLecturerName();
            //2. del from db
            DivisionHandler.deleteDivision(divisionId);

            // 3. remove From JTable
            DefaultTableModel tm = (DefaultTableModel) jTableDivision.getModel();
            tm.removeRow(jTableDivision.getSelectedRow());

            // 4. empty Fields
            emptyFieldsDivisions();
         //   LogHandler.insertLog(9, 3, "Delete Consolate Ok - Consolate  : " + logDeletedConsolateName);
        }

    }                                                     

    private void jButtonUpdateDivisionActionPerformed(java.awt.event.ActionEvent evt) {                                                      
        int optionChoosen = JFrameMaster.checkConfirm();
        if (optionChoosen == JOptionPane.YES_OPTION) {
            // 1, Read Fields
            int divisionId = Integer.parseInt(jTextFieldDivisionId.getText());
            String divisionName = jTextFieldDivisionName.getText();
  String departmentName = (String) jComboBoxDepartment.getSelectedItem();

            Division division = new Division(divisionId, divisionName, DepartmentHandler.getDepartmentByName(departmentName));

            // 2. update DB
            DivisionHandler.updateDivision(division);

            // 3. update JTable
            jTableDivision.setValueAt(divisionId, jTableDivision.getSelectedRow(), 0);
            jTableDivision.setValueAt(divisionName, jTableDivision.getSelectedRow(), 1);

            // 4. Empty Fields
            emptyFieldsDivisions();

         //   LogHandler.insertLog(8, 3, "Update Lecture Ok - Lecture : " + divisionName);
        }

    }                                                     

    private void jButtonAddDivisionActionPerformed(java.awt.event.ActionEvent evt) {                                                   

        int optionChoosen = JFrameMaster.checkConfirm();
        if (optionChoosen == JOptionPane.YES_OPTION) {
            // 0. read Fields
            String divisionName = jTextFieldDivisionName.getText();

            String deparmtentName = (String) jComboBoxDepartment.getSelectedItem();

            Division division = new Division(divisionName, DepartmentHandler.getDepartmentByName(deparmtentName));

            // 1. Add row to DB
            DivisionHandler.insertDivision(division);

            // 2. Add row to JTable
            DefaultTableModel tm = (DefaultTableModel) jTableDivision.getModel();
            Object[] rowData = {division.getDivisionId(), division.getDivisionName()};

            tm.addRow(rowData);

            /// refresh
            tm.setRowCount(0);
            getAllDivisions();

            // 3. Empty fields
            emptyFieldsDivisions();

            // 4. show Save Msg
            JOptionPane.showMessageDialog(null, "Data Saved Done", "Saving..", JOptionPane.INFORMATION_MESSAGE);

         //   LogHandler.insertLog(7, 3, "Create lecturer Ok - lecturer : " + lecturerName);
        }

    }                                                  

    private void jTableDivisionMouseClicked(java.awt.event.MouseEvent evt) {                                            

        Integer divisionId = (Integer) jTableDivision.getValueAt(jTableDivision.getSelectedRow(), 0);
        String divisionName = (String) jTableDivision.getValueAt(jTableDivision.getSelectedRow(), 1);
        String departmentName = (String) jTableDivision.getValueAt(jTableDivision.getSelectedRow(), 2);

        jTextFieldDivisionId.setText(divisionId.toString());
        jTextFieldDivisionName.setText(divisionName);
        jComboBoxDepartment.setSelectedItem( DepartmentHandler.getDepartmentByName(departmentName).getDepartmentName());

      


    }                                           

    public void getAllGroups() {

// 1. Get All Software From DB
        ArrayList<Group> groupsList = GroupHandler.getAllGroups();
        // 2. Add Rows to JTable
        DefaultTableModel tm = (DefaultTableModel) jTableGroups.getModel();

        for (Group group : groupsList) {
            Object[] rowData = {group.getGroupId(), group.getGroupName(), group.getDivision().getDivisionName()};
            tm.addRow(rowData);
        }

    }

    public void getAllDivisions() {
        // 1. Get All Software From DB
        ArrayList<Division> divisionsList = DivisionHandler.getAllDivisions();

        // 2. Add Rows to JTable
        DefaultTableModel tm = (DefaultTableModel) jTableDivision.getModel();

        for (Division division : divisionsList) {
            Object[] rowData = {division.getDivisionId(), division.getDivisionName(), division.getDepartment().getDepartmentName()};

            tm.addRow(rowData);
        }

    }

    private void emptyFieldsDivisions() {
        jTextFieldDivisionId.setText("");
        jTextFieldDivisionName.setText("");
             jComboBoxDepartment.setSelectedIndex(0);
           
    }

    private void emptyFieldsGroups() {
        jTextFieldGroupId.setText("");
        jTextFieldGroupName.setText("");
    }

    // Variables declaration - do not modify                     
    private javax.swing.JButton jButtonAddDivision;
    private javax.swing.JButton jButtonAddGroup;
    private javax.swing.JButton jButtonCancelDivision;
    private javax.swing.JButton jButtonCancelGroup;
    private javax.swing.JButton jButtonDeleteDivision;
    private javax.swing.JButton jButtonDeleteGroup;
    private javax.swing.JButton jButtonUpdateDivision;
    private javax.swing.JButton jButtonUpdateGroup;
    private javax.swing.JComboBox jComboBoxDepartment;
    private javax.swing.JComboBox jComboBoxDivision;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabelConsolateTypeId;
    private javax.swing.JLabel jLabelKanaatId;
    private javax.swing.JLabel jLabelKanaatText;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTable jTableDivision;
    private javax.swing.JTable jTableGroups;
    private javax.swing.JTextField jTextFieldDivisionId;
    private javax.swing.JTextField jTextFieldDivisionName;
    private javax.swing.JTextField jTextFieldGroupId;
    private javax.swing.JTextField jTextFieldGroupName;
    // End of variables declaration                   

}
